<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cart | ELVT.</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
<style>
html, body { height: 100%; margin: 0; }
body { display: flex; flex-direction: column; font-family: 'Poppins', sans-serif; background: #0a0a0a; color: #f5f5f5; scroll-behavior: smooth; }

/* Navbar base */
nav {
    position:fixed;
    top:0;
    width:100%;
    background:rgba(0,0,0,0.85);
    padding:1em 1.5em;
    z-index:100;
    backdrop-filter:blur(8px);
}

.nav-inner {
    display:flex;
    align-items:center;
    justify-content:center; /* desktop centered */
    max-width:1200px;
    margin:0 auto;
}

nav ul {
    display:flex;
    justify-content:center;
    align-items:center;
    gap:2em;
    list-style:none;
    margin:0;
    padding:0;
}

nav li { display:inline-block; }
nav a { color:#f5f5f5; font-weight:400; letter-spacing:1px; transition:color 0.3s; }
nav a:hover { color:#ff6347; }

.menu-toggle {
    display:none;
    font-size:1.8em;
    cursor:pointer;
    user-select:none;
}

/* ===== Premium Mobile Nav ===== */
@media (max-width:768px) {

    body.nav-open {
        overflow: hidden;
    }

    .menu-toggle {
        display:block;
        font-size:1.9em;
        z-index:1001;
        transition: transform 0.4s ease;
    }

    nav ul {
        position:fixed;
        inset:0;
        height:100vh;
        width:100%;
        background:rgba(0,0,0,0.96);
        flex-direction:column;
        justify-content:center;
        align-items:center;
        gap:2em;
        padding:0;
        margin:0;
        transform:translateY(-100%);
        transition:transform 0.6s cubic-bezier(0.77,0,0.175,1);
    }

    nav ul.active {
        transform:translateY(0);
    }

    nav ul li {
        opacity:0;
        transform:translateY(30px);
        animation: navItemFade 0.6s ease forwards;
    }

    nav ul.active li:nth-child(1) { animation-delay:0.15s; }
    nav ul.active li:nth-child(2) { animation-delay:0.25s; }
    nav ul.active li:nth-child(3) { animation-delay:0.35s; }
    nav ul.active li:nth-child(4) { animation-delay:0.45s; }
    nav ul.active li:nth-child(5) { animation-delay:0.55s; }
    nav ul.active li:nth-child(6) { animation-delay:0.65s; }
    nav ul.active li:nth-child(7) { animation-delay:0.75s; }

    nav ul a {
        font-size:1.4em;
        letter-spacing:2px;
        text-transform:uppercase;
    }
}

/* Menu item animation */
@keyframes navItemFade {
    to {
        opacity:1;
        transform:translateY(0);
    }
}


/* Fix hamburger placement on mobile */
@media (max-width:768px) {
    .nav-inner {
        justify-content: flex-start;
    }

    .menu-toggle {
        position: relative;
    }
}

nav a {
    text-decoration: none;  /* remove underline */
    color: #f5f5f5;
}



.cart-container { flex: 1; max-width: 900px; margin: 0 auto; padding: 120px 20px 60px 20px; }
h1 { font-family:'Playfair Display', serif; font-size:2.5em; font-weight:700; margin-bottom:30px; text-align:center; }

.cart-item { display:flex; gap:20px; align-items:center; padding:20px 0; border-bottom:1px solid #333; }
.cart-item img { width:90px; border-radius:8px; }
.cart-details { flex:1; }
.cart-details h3 { font-weight:500; margin-bottom:5px; }
.cart-details p { font-size:14px; opacity:.8; }
.cart-actions { text-align:right; }
.remove-btn { background:#b00000; color:#fff; border:none; padding:8px 14px; cursor:pointer; border-radius:4px; transition:0.3s; }
.remove-btn:hover { background:#ff3b3b; }

.total { text-align:right; font-size:22px; margin-top:30px; }

#order-form { display:flex; flex-direction:column; gap:1em; max-width:400px; margin:2em auto; }
#order-form input, #order-form textarea { padding:0.8em; background:#1a1a1a; color:#fff; border:1px solid #333; border-radius:5px; transition:0.3s; }
#order-form input:focus, #order-form textarea:focus { border-color:#ff6347; box-shadow:0 0 8px rgba(255,99,71,0.5); outline:none; }
#order-form button { padding:1em; border:none; background:#ff6347; color:white; cursor:pointer; font-weight:500; transition: transform 0.3s; }
#order-form button:hover { transform:scale(1.05); }

.success-message { display:none; color:#ff6347; margin-top:0.5em; font-weight:500; opacity:0; transition:opacity 0.5s ease-in-out; text-align:center; font-size:1.1em; }
.success-message.show { display:block; opacity:1; }

.empty { text-align:center; opacity:.6; margin-top:60px; font-size:1.2em; }

footer { text-align:center; padding:2em; background:#000; color:#888; font-size:0.9em; }
footer .social-icons { display:flex; justify-content:center; gap:1em; margin-bottom:1em; }
footer .social-icons a svg { width:24px; height:24px; fill:#fff; transition: transform 0.3s, fill 0.3s; }
footer .social-icons a:hover svg { transform:scale(1.2); fill:#ff6347; }

@media(max-width:768px) {
    .cart-item { flex-direction:column; align-items:flex-start; }
    .cart-actions { width:100%; text-align:left; margin-top:10px; }
}

/* Back button */
.back-btn{
    position:fixed;
    top:80px; /* below navbar */
    left:20px;
    z-index:900;
    padding:0.6em 1.2em;
    background:rgba(0,0,0,0.75);
    color:#fff;
    border:1px solid rgba(255,255,255,0.15);
    border-radius:999px;
    font-size:0.9em;
    letter-spacing:1px;
    text-decoration:none;
    backdrop-filter:blur(8px);
    transition:all 0.3s ease;
}

.back-btn:hover{
    background:#ff6347;
    border-color:#ff6347;
}

/* Mobile adjustment */
@media (max-width:768px){
    .back-btn{
        top:70px;
        left:14px;
        font-size:0.85em;
    }
}

</style>
</head>
<body>

<!-- Navbar -->
<nav>

<a href="gender.html" class="back-btn">← Back</a>

  <div class="nav-inner">
    <div class="menu-toggle" id="menuToggle">☰</div>

    <ul id="navMenu">
      <li><a href="index.html#hero">Home</a></li>
      <li><a href="index.html#about">Philosophy</a></li>
      <li><a href="index.html#merch">Merch</a></li>
      <li><a href="index.html#contact">Contact</a></li>
      <li><a href="cart.html">Cart</a></li>
    </ul>
  </div>
</nav>


<!-- Cart Section -->
<div class="cart-container">
    <h1>Your Cart</h1>
    <div id="cart-items"></div>
    <div class="total" id="cart-total"></div>

  <button id="checkout-btn" style="
  width:100%;
  max-width:400px;
  margin:2em auto;
  padding:1em;
  font-size:1.1em;
  background:#ff6347;
  color:#fff;
  border:none;
  cursor:pointer;
  display:block;
">
  Pay Securely
</button>


    <!-- Success Message (outside form so it stays visible) -->
    <p id="order-success" class="success-message">Your order was sent successfully! We will contact you shortly. Thank you!</p>
</div>

<!-- Footer -->
<footer>
    <div class="social-icons">
        <a href="https://www.instagram.com/elvt.by.adam/" target="_blank" aria-label="Instagram" rel="noopener noreferrer">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.17.056 1.97.24 2.432.403a4.92 4.92 0 0 1 1.773 1.024 4.92 4.92 0 0 1 1.024 1.774c.164.462.347 1.262.403 2.432.058 1.266.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.056 1.17-.24 1.97-.403 2.432a4.92 4.92 0 0 1-1.024 1.773 4.92 4.92 0 0 1-1.774 1.024c-.462.164-1.262.347-2.432.403-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-1.17-.056-1.97-.24-2.432-.403a4.92 4.92 0 0 1-1.773-1.024 4.92 4.92 0 0 1-1.024-1.774c-.164-.462-.347-1.262-.403-2.432C2.175 15.747 2.163 15.367 2.163 12s.012-3.584.07-4.85c.056-1.17.24-1.97.403-2.432a4.92 4.92 0 0 1 1.024-1.773 4.92 4.92 0 0 1 1.774-1.024c.462-.164 1.262-.347 2.432-.403C8.416 2.175 8.796 2.163 12 2.163zm0-2.163C8.736 0 8.332.012 7.052.07 5.773.127 4.818.34 4.065.63a6.92 6.92 0 0 0-2.5 1.605A6.92 6.92 0 0 0 .63 4.065c-.29.753-.503 1.708-.56 2.987C0 8.332 0 8.736 0 12s.012 3.668.07 4.948c.057 1.279.27 2.234.56 2.987a6.92 6.92 0 0 0 1.605 2.5 6.92 6.92 0 0 0 2.5 1.605c.753.29 1.708.503 2.987.56C8.332 24 8.736 24 12 24s3.668-.012 4.948-.07c1.279-.057 2.234-.27 2.987-.56a6.92 6.92 0 0 0 2.5-1.605 6.92 6.92 0 0 0 1.605-2.5c.29-.753.503-1.708.56-2.987.058-1.28.07-1.684.07-4.948s-.012-3.668-.07-4.948c-.057-1.279-.27-2.234-.56-2.987a6.92 6.92 0 0 0-1.605-2.5 6.92 6.92 0 0 0-2.5-1.605c-.753-.29-1.708-.503-2.987-.56C15.668.012 15.264 0 12 0z"/>
                <path d="M12 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zm0 10.162a3.999 3.999 0 1 1 0-7.998 3.999 3.999 0 0 1 0 7.998z"/>
                <circle cx="18.406" cy="5.594" r="1.44"/>
            </svg>
        </a>
    </div>
    <p>© 2025 ELVT. by Adam Hamed. All rights reserved.</p>
</footer>

<script>
let cart = JSON.parse(localStorage.getItem('cart')) || [];
const cartItems = document.getElementById('cart-items');
const cartTotal = document.getElementById('cart-total');

function renderCart() {
    cartItems.innerHTML = "";
    let total = 0;

    if(cart.length === 0){
        cartItems.innerHTML = `<p class="empty">Your cart is empty</p>`;
        cartTotal.style.display = "none";
        document.querySelector('#order-form button').style.display = "none";
        return;
    }

    cart.forEach((item, index) => {
        total += item.price * item.qty;
        cartItems.innerHTML += `
            <div class="cart-item">
                <img src="${item.image}" alt="${item.name}">
                <div class="cart-details">
                    <h3>${item.name}</h3>
                    <p>Size: ${item.size}</p>
                    <p>Qty: ${item.qty}</p>
                    <p>$${(item.price * item.qty).toFixed(2)}</p>
                </div>
                <div class="cart-actions">
                    <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
                </div>
            </div>
        `;
    });

    cartTotal.style.display = "block";
    cartTotal.innerHTML = `Total: $${total.toFixed(2)}`;
}

function removeItem(index){
    cart.splice(index,1);
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
}

renderCart();

const form = document.getElementById('order-form');
const successMsg = document.getElementById('order-success');
const cartDetailsInput = document.getElementById('cartDetails');

form.addEventListener('submit', function(event){
    event.preventDefault();

    if(cart.length === 0){
        alert('Your cart is empty.');
        return;
    }

    // Build cart details for Formspree
    let cartText = cart.map(item => 
        `${item.name} | Size: ${item.size} | Qty: ${item.qty} | $${(item.price*item.qty).toFixed(2)}`
    ).join("\n");

    cartDetailsInput.value = cartText;

    const formData = new FormData(form);

    fetch(form.action, {
        method: form.method,
        body: formData,
        headers: { 'Accept': 'application/json' }
    })
    .then(response => {
        if(response.ok){
            successMsg.classList.add('show'); // show success message
            cart = []; // clear cart
            localStorage.removeItem('cart');
            renderCart();
            form.style.display = 'none';

           
        } else {
            alert('Error sending order.');
        }
    })
    .catch(error => {
        alert('Error sending order: ' + error);
    });
});

</script>

<script>
const toggle = document.getElementById("menuToggle");
const menu = document.getElementById("navMenu");
const body = document.body;

toggle.addEventListener("click", () => {
    menu.classList.toggle("active");
    body.classList.toggle("nav-open");

    toggle.textContent = menu.classList.contains("active") ? "✕" : "☰";

    // reset animations when reopening
    if (menu.classList.contains("active")) {
        menu.querySelectorAll("li").forEach(li => {
            li.style.animation = "none";
            li.offsetHeight; // trigger reflow
            li.style.animation = "";
        });
    }
});

menu.querySelectorAll("a").forEach(link => {
    link.addEventListener("click", () => {
        menu.classList.remove("active");
        body.classList.remove("nav-open");
        toggle.textContent = "☰";
    });
});
</script>

<script>
document.getElementById("checkout-btn").addEventListener("click", async () => {

    if (cart.length === 0) {
        alert("Your cart is empty");
        return;
    }

    const response = await fetch("https://www.elvtbyadam.com/api/create-checkout-session", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ cartItems: cart })
    });

    const data = await response.json();

    if (data.url) {
        window.location.href = data.url;
    } else {
        alert("Stripe error. Check server.");
    }
});
</script>




</body>
</html>
